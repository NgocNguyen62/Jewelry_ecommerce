<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Quản lý tài khoản</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<!--  <link type="text/css" rel="stylesheet" href="bootstrap.min.css" th:href="@{bootstrap.min.css}"/>-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/sidebar.css">

  <style>
    #new-button{
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
<!--<div th:insert="/navbar :: navbar"></div>-->

<!--<div th:text="${#authentication.principal.authorities}">-->
<!--</div>-->
<!--<div th:if="${#authorization.expression('hasAuthority(''ADMIN'')')}">-->
<!--    ADMIN section-->
<!--</div>-->
<div th:insert="/sidebar :: sidebar"></div>
<div class="content">
  <div th:insert="/navbar :: navbar"></div>
  <div class="col-3"></div>
  <div class="container col-6">
    <h3>Quản lý tài khoản</h3>
    <div class="row">
      <a id="new-button" href="/user/add" class="btn btn-success">Tạo mới</a>
      <a th:href="@{/user/export}" class="btn btn-success" style="margin-bottom: 20px">Xuất file</a>
    </div>
    <table class="table table-active">
      <tr>
        <th>Email</th>
        <th>Số điện thoại</th>
        <th>Quyền</th>
        <th>Trạng thái</th>

      </tr>
      <tr th:each="user : ${users}">
        <td th:text="${user.email}"></td>
        <td th:text="${user.phone}"></td>
        <td th:text="${user.role}"></td>
        <td th:if="${user.userStatus} == 0" th:text="'Không khóa'"></td>
        <td th:if="${user.userStatus} == 1" th:text="'Khóa'"></td>

        <td>
          <a th:href="@{/user/edit?id={id}(id=${user.id})}" class="btn btn-primary">Chỉnh sửa</a>
          <a data-toggle="modal" th:data-target="'#deleteModal-' + ${user.id}" class="btn btn-danger">Xóa</a>
          <div class="modal fade" th:id="'deleteModal-' + ${user.id}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  Xác nhận xóa người dùng có id = <span th:text="${user.id}"></span> ?
                </div>
                <div class="modal-footer">
                  <a type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</a>
                  <a th:href="@{/user/delete?id={id}(id=${user.id})}" type="button" class="btn btn-danger">Xóa</a>
                </div>
              </div>
            </div>
          </div>

          <!--        <a th:href="@{/user/details?id={id}(id=${user.id})}" class="btn btn-primary">View</a>-->
        </td>
      </tr>
    </table>
  <!--  <a href="/user/add" class="btn btn-success">Add User</a>-->
  </div>
</div>
<!--<div th:insert="/user/fragment :: demo"></div>-->

</body>
</html>