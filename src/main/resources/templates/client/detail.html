<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>EShopper - Bootstrap Shop Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/template2/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.0.7/css/star-rating.css" media="all" rel="stylesheet" type="text/css" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/template2/css/style.css" rel="stylesheet">

<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css">-->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/kartik-v-bootstrap-star-rating-6f8575f/css/star-rating.css" media="all" type="text/css"/>
    <link rel="stylesheet" href="/kartik-v-bootstrap-star-rating-6f8575f/themes/krajee-fa/theme.css" media="all" type="text/css"/>
    <link rel="stylesheet" href="/kartik-v-bootstrap-star-rating-6f8575f/themes/krajee-svg/theme.css" media="all" type="text/css"/>
    <link rel="stylesheet" href="/kartik-v-bootstrap-star-rating-6f8575f/themes/krajee-uni/theme.css" media="all" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="/kartik-v-bootstrap-star-rating-6f8575f/js/star-rating.js" type="text/javascript"></script>
    <script src="/kartik-v-bootstrap-star-rating-6f8575f/themes/krajee-fa/theme.js" type="text/javascript"></script>
    <script src="/kartik-v-bootstrap-star-rating-6f8575f/themes/krajee-svg/theme.js" type="text/javascript"></script>
    <script src="/kartik-v-bootstrap-star-rating-6f8575f/themes/krajee-gly/theme.js" type="text/javascript"></script>
    <script src="/kartik-v-bootstrap-star-rating-6f8575f/themes/krajee-uni/theme.js" type="text/javascript"></script>

</head>

<body>
    <div th:insert="/client/header2 :: header"></div>

    <!-- Page Header Start -->
    <div class="container-fluid bg-secondary mb-5">
        <div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 150px">
            <h1 class="font-weight-semi-bold text-uppercase mb-3">Chi tiết sản phẩm</h1>

        </div>
    </div>
    <!-- Page Header End -->


    <!-- Shop Detail Start -->
    <div class="container-fluid py-5">
        <div class="row px-xl-5">
            <div class="col-lg-5 pb-5">
                <div id="product-carousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner border">
                        <div class="carousel-item active">
                            <img class="w-100 h-100" th:src="@{${product.avatar}}" alt="Image">
                        </div>
                        <div class="carousel-item" th:each="img : ${images}">
                            <img class="w-100 h-100" th:src="@{${img}}" alt="Image">
                        </div>

                    </div>
                    <a class="carousel-control-prev" href="#product-carousel" data-slide="prev">
                        <i class="fa fa-2x fa-angle-left text-dark"></i>
                    </a>
                    <a class="carousel-control-next" href="#product-carousel" data-slide="next">
                        <i class="fa fa-2x fa-angle-right text-dark"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-7 pb-5">
                <h3 class="font-weight-semi-bold" th:text="${product.productName}"></h3>
                <div class="d-flex mb-3" th:if="${averageStar != 0.0}">
                    <div class="text-primary mr-2">
                        <small class="fas fa-star" th:each="i : ${#numbers.sequence(1, averageStar)}"></small>
                        <small class="fas fa-star-half-alt" th:if="${averageStar % 1 != 0}"></small>
                        <small class="far fa-star" th:each="i : ${#numbers.sequence(1, 5 - averageStar)}"></small>
                        <small class="far fa-star" th:if="${averageStar % 1 != 0}" th:each="i : ${#numbers.sequence(1, 5 - 0.5 - averageStar)}"></small>
                    </div>
                    <small class="pt-1"><span th:text="'(' + ${countRate} + ' lượt đánh giá)'"></span></small>
                </div>
                <div class="d-flex mb-3" th:if="${averageStar == 0.0}">
                    <span>Chưa có lượt đánh giá</span>
                </div>
                <div class="d-flex pt-2">
                    <div class="d-inline-flex">
                        <div class="px-2">
                            Đã bán:<span th:text="${product.sales}" class="ml-1"></span>
                        </div>
                        <div class="px-2">
                            Còn lại:<span th:text="${product.quantity}" class="ml-1"></span>
                        </div>
                    </div>
                </div>

                <div class="d-flex pt-3">
                    <div class="d-inline-flex">
                        <div class="px-2">
                            <del th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'đ'"></del>
                        </div>
                        <div class="px-2">
                            <h3 class="font-weight-semi-bold mb-4" th:text="${#numbers.formatDecimal(product.discount, 0, 'COMMA', 0, 'POINT')} + 'đ'"></h3>
                        </div>
                    </div>
                </div>

                <p th:utext="${product.description}"></p>
                <div class="d-flex align-items-center mb-4 pt-2">
                    <a th:onclick="addToCart([[${product.id}]])" class="btn btn-primary px-3"><i class="fa fa-shopping-cart mr-1"></i> Thêm vào giỏ hàng</a>
                </div>
                <div class="d-flex align-items-center mb-4 pt-2">
                    <a th:unless="${isFavorite}" th:href="@{/favorite/add?id={id}(id=${product.id})}"><i class="fas fa-heart">  Yêu thích</i></a>
                    <a th:if="${isFavorite}" th:href="@{/favorite/remove?id={id}(id=${product.id})}"><i class="fas fa-heart">  Bỏ thích</i></a>
                </div>
                <div class="d-flex pt-2">
                    <p class="text-dark font-weight-medium mb-0 mr-2">Share on:</p>
                    <div class="d-inline-flex">
                        <a class="text-dark px-2" href="">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a class="text-dark px-2" href="">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a class="text-dark px-2" href="">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a class="text-dark px-2" href="">
                            <i class="fab fa-pinterest"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row px-xl-5">
            <div class="col">
                <div class="nav nav-tabs justify-content-center border-secondary mb-4">
                    <a class="nav-item nav-link active" data-toggle="tab" href="#tab-pane-1">Mô tả</a>
                    <a class="nav-item nav-link" data-toggle="tab" href="#tab-pane-2">Đánh giá</a>
                </div>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tab-pane-1">
                        <h4 class="mb-3">Mô tả sản phẩm</h4>
                        <p th:utext="${product.description}"></p>
                    </div>
                    <div class="tab-pane fade" id="tab-pane-2">
                        <div class="col-md-6">
                            <h4 class="mb-4">Đánh giá</h4>
                        </div>
                        <div th:if="${#authorization.expression('isAuthenticated()')}">
                            <div th:unless="${rateExisted}" th:insert="/client/rate-form :: rateForm"></div>
                        </div>
                        <div th:unless="${#authorization.expression('isAuthenticated()')}">
                            <a th:href="@{/login}">Đăng nhập để bình luận</a>
                        </div>
                            <div class="col-md-6">
<!--                                <h4 class="mb-4">1 review for "Colorful Stylish Shirt"</h4>-->
                                <div class="media mb-4">
                                    <div class="media-body" th:each="rate : ${rates}">
                                        <h6 th:text="${rate.getUser().getEmail()}"><small> - <i th:text="${rate.getRateTime()}"></i></small></h6>
                                        <small th:text="${#temporals.format(rate.rateTime, 'dd-MM-yyyy HH:mm:ss')}"></small>
                                        <div class="text-primary mb-2">
                                            <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, rate.stars)}"></i>
                                            <i class="fas fa-star-half-alt" style="display: none"></i>
                                            <i class="far fa-star" th:each="i : ${#numbers.sequence(1, 5 - rate.stars)}"></i>
                                        </div>
                                        <p th:text="${rate.comment}"></p>
                                    </div>
                                </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Shop Detail End -->


    <!-- Products Start -->
    <div class="container-fluid py-5">
        <div class="text-center mb-4">
            <h2 class="section-title px-5"><span class="px-2">Sản phẩm tương tự</span></h2>
        </div>
        <div class="row px-xl-5">
            <div class="col">
                <div class="owl-carousel related-carousel">
                    <div class="card product-item border-0" th:each="product : ${relatives}">
                        <div th:insert="/product-fragment :: product"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Products End -->

    <!-- Footer Start -->
    <div th:insert="/client/footer :: footer"></div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-primary back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="/template2/lib/easing/easing.min.js"></script>
    <script src="/template2/lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="/template2/mail/jqBootstrapValidation.min.js"></script>
    <script src="/template2/mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="/template2/js/main.js"></script>
    <script src="/js/addCart.js"></script>
</body>

</html>